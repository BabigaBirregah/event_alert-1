<link rel="stylesheet" type="text/css" href="/styles/jquery.datetimepicker.css"/>
<link rel="stylesheet" type="text/css" href="/styles/material-switch.css"/>
<ul class="nav navbar-nav">
	<li class="dropdown mega-dropdown">
		<a href="#" id="id_create_alert_tab" class="dropdown-toggle" data-toggle="dropdown">Alerter un incident <b class="caret"></b></a>
		
		<ul class="dropdown-menu mega-dropdown-menu row">
			<li class="col-sm-12">
                <form class="form" action="alert/create" method="post" role="form">
					<div class="container-fluid">
					    <section class="container">
							<div class="container-page">				
								<div class="col-md-6">
									<%- partial('flash-message-panel.ejs') %>
									<h3 class="dropdown-header">Alerter un incident</h3>
									
									<div class="form-group col-lg-12">
										<label>Date</label>
										<input type="" name="date" class="form-control" id="datetimepicker_mask" value="">
									</div>
									
									<div class="form-group col-lg-12">
										<label>Event</label>
										<input type="text" name="event" class="form-control" id="" value="">
									</div>
									
									<div class="form-group col-lg-12">
										<label>Type</label>
										<input type="text" id="" name="type" class="form-control"/>
									</div>
													
									<div class="form-group col-lg-12">
										<label>Details</label>
										<input type="text" name="details" class="form-control" id="" value="">
									</div>
									<div class="form-group col-lg-12">
										<label style="margin-left: 30px">Rester en anonyme..</label>
										<div class="material-switch pull-left">
				                            <input type="checkbox" name="isAnonymous"  id="isAnonymous"/>
				                            <label for="isAnonymous" class="label-primary"></label>
				                        </div>
				                    </div>
								</div>
							
								<div class="col-md-6">
									<h3 class="dark-grey">Localisation..</h3>

									<div id="googleMap" style="width:460px;height:270px;"></div>
									<center style="margin-top:20px"><button type="submit" class="btn btn-primary">Valider <span class="glyphicon glyphicon-thumbs-up"></button></center>
								</div>
							</div>
						</section>
					</div>
                </form>  
			</li>
		</ul>
	</li>
</ul>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js"></script>
<script src="/js/jquery.datetimepicker.full.js"></script>
<script type="text/javascript">
	$(function(){
		$( "#id_create_alert_tab" ).trigger( "click" );		
	});

	/* Map */
	var map;
	var myCenter=new google.maps.LatLng(51.508742,-0.120850);

	function initialize() {
	var mapProp = {
	  	center:myCenter,
	  	zoom:5,
	  	mapTypeId:google.maps.MapTypeId.ROADMAP
	  	};

	  	map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

	  	google.maps.event.addListener(map, 'click', function(event) {
	    	placeMarker(event.latLng);
	  	});
	}

	function placeMarker(location) {
	  	var marker = new google.maps.Marker({
	    	position: location,
	    	map: map,
	  	});
	  	var infowindow = new google.maps.InfoWindow({
	    	content: 'Latitude: ' + location.lat() + '<br>Longitude: ' + location.lng()
	  	});
	  	infowindow.open(map,marker);
	}

	google.maps.event.addDomListener(window, 'load', initialize);

	/* Mask DateTimePicker */
	$('#datetimepicker_mask').datetimepicker({
		mask:'9999/19/39 29:59'
	});
</script>